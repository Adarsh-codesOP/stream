StreamLink Signaling Layer - Test Workflow
==========================================

This layer handles real-time WebSockets, Redis Pub/Sub, and gRPC coordination.

Prerequisites
-------------
You must have THREE separate terminals running:

1. **Redis**
   - Command: `docker-compose up` (in root directory)
   - Port: 6379

2. **Management Server** (Leader)
   - Directory: `management_layer/`
   - Command: `python main.py`
   - Port: 50051 (gRPC)

3. **Signaling Server** (Worker)
   - Directory: `signaling_layer/`
   - Command: `python main.py`
   - Port: 8001 (WebSocket)

Running the Test
----------------
We have provided an integration test script: `test_signaling_full.py`.

Run this in the `signaling_layer` directory:
    python test_signaling_full.py

**What the test does:**
1.  **Setup**: Connects to Management Server to create Users (Alice, Bob) and a Chat Room.
2.  **Connect**: Alice and Bob connect to the Signaling Server via WebSockets.
3.  **Chat**: Alice sends "Hello Bob!".
4.  **Verify**: Bob receives the message via Redis Pub/Sub.

Expected Output
---------------
    [Setup] Connecting to Management Layer to seed data...
    [Setup] User A: alice_1234 (ID: 10)
    ...
    [Alice] Connected!
    [Bob] Connected!
    [Alice] Sent: Hello Bob!
    [Bob] Received: {'type': 'chat', 'user_id': 10, 'content': 'Hello Bob!'}
    --- Test Complete ---

Troubleshooting
---------------
- **"Connection Refused"**: Check if Management Server is running.
- **"Error: no close frame"**: Check if Signaling Server crashed (check its terminal logs).
- **"Redis Loop Error"**: Check if Redis is running.
